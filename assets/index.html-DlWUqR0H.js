import{_ as a,c as t,a as n,o as p}from"./app-DCYTdW2o.js";const e={};function l(m,s){return p(),t("div",null,[...s[0]||(s[0]=[n('<h2 id="如何优化代码" tabindex="-1"><a class="header-anchor" href="#如何优化代码"><span>如何优化代码</span></a></h2><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206152115946.png" alt="image-20251206152115946"></p><h3 id="_1-诊断步骤-检查训练数据上的损失" tabindex="-1"><a class="header-anchor" href="#_1-诊断步骤-检查训练数据上的损失"><span>1. 诊断步骤：检查训练数据上的损失 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>train</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\\text{train}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">train</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)</span></a></h3><p>首先检查模型在<strong>训练集</strong>上的表现。</p><table><thead><tr><th><strong>Ltrain</strong></th><th><strong>问题方向</strong></th><th><strong>诊断结果</strong></th><th><strong>解决方案</strong></th></tr></thead><tbody><tr><td><strong>很大 (large)</strong></td><td><strong>1. 模型偏差 (model bias) / 欠拟合 (Underfitting)</strong></td><td>模型过于简单，表达能力不足。</td><td><strong>使模型更复杂</strong></td></tr><tr><td><strong>很大 (large)</strong></td><td><strong>2. 优化问题 (optimization)(比如说是梯度下降不管用)</strong></td><td>模型理论上能拟合，但优化器未能找到好的权重。</td><td><strong>调整优化器参数</strong></td></tr><tr><td><strong>很小 (small)</strong></td><td><strong>→ 进入下一步：检查测试损失。</strong></td><td>模型已学会训练集数据。</td><td>-</td></tr></tbody></table><h3 id="_2-诊断步骤-检查测试数据上的损失" tabindex="-1"><a class="header-anchor" href="#_2-诊断步骤-检查测试数据上的损失"><span>2. 诊断步骤：检查测试数据上的损失 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>test</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\\text{test}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">test</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)</span></a></h3><p>如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>train</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\\text{train}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">train</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 很小，接着检查模型在<strong>测试集</strong>上的泛化能力。</p><table><thead><tr><th><strong>Ltest</strong></th><th><strong>问题诊断</strong></th><th><strong>解决方案</strong></th></tr></thead><tbody><tr><td><strong>很大 (large)</strong></td><td><strong>1. 过拟合 (overfitting)</strong></td><td>模型过度学习训练集细节和噪声。</td></tr><tr><td><strong>很大 (large)</strong></td><td><strong>2. 错配 (mismatch)</strong></td><td>训练集和测试集的<strong>数据分布不一致</strong>。</td></tr><tr><td><strong>很小 (small)</strong></td><td><strong>模型表现良好</strong> 😊</td><td>-</td></tr></tbody></table><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><ul><li><p><strong>欠拟合</strong> (高偏差) 的解决方案是<strong>使模型复杂</strong>。</p></li><li><p><strong>过拟合</strong> (高方差) 的解决方案是<strong>使模型简单</strong>。</p></li><li><p>在两者之间寻找平衡是深度学习调参的关键。</p></li></ul><blockquote><p>模型的弹性：</p><p>一个<strong>有弹性</strong>的模型不会因为一点点噪声就崩溃或做出荒谬的预测，它能<strong>持续稳定</strong>地在各种复杂和变化的环境中提供有用的结果。</p></blockquote><h2 id="如何处理过拟合" tabindex="-1"><a class="header-anchor" href="#如何处理过拟合"><span>如何处理过拟合</span></a></h2><h3 id="_1-数据层面" tabindex="-1"><a class="header-anchor" href="#_1-数据层面"><span>1.数据层面</span></a></h3><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206153805048.png" alt="image-20251206153805048"></p><ul><li><p><strong>增加训练数据 (More Training Data):</strong> 这是最可靠的方法，直接提供更多、更具普遍性的样本，迫使模型学习更抽象的特征。</p></li><li><p><strong>数据增强 (Data Augmentation):</strong> 通过对现有数据进行系统性变换（如图像的旋转、裁剪、色彩变换等），人工扩展训练集的规模和多样性。</p></li></ul><h3 id="_2-模型层面" tabindex="-1"><a class="header-anchor" href="#_2-模型层面"><span>2.模型层面</span></a></h3><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206154155277.png" alt="image-20251206154155277"></p><h2 id="k折交叉验证" tabindex="-1"><a class="header-anchor" href="#k折交叉验证"><span>K折交叉验证</span></a></h2><p>K 折交叉验证的基本步骤如下：</p><h3 id="_1-划分数据集" tabindex="-1"><a class="header-anchor" href="#_1-划分数据集"><span>1. 划分数据集</span></a></h3><p>将整个可用的数据集（通常是训练集和验证集的总和，不包括测试集）<strong>随机</strong>地分成 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 个大小相等的子集（或称“折”/“Fold”）。</p><h3 id="_2-进行-k-次循环训练" tabindex="-1"><a class="header-anchor" href="#_2-进行-k-次循环训练"><span>2. 进行 K 次循环训练</span></a></h3><p>进行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 次独立的模型训练和评估循环：</p><ul><li><strong>验证集 (Validation Set):</strong> 在第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 次循环中，将第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个子集作为<strong>验证集</strong>。</li><li><strong>训练集 (Training Set):</strong> 将剩下的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 个子集<strong>合并</strong>起来作为<strong>训练集</strong>，用于训练模型。</li></ul><h3 id="_3-性能平均" tabindex="-1"><a class="header-anchor" href="#_3-性能平均"><span>3. 性能平均</span></a></h3><p>每次循环都会得到一个性能指标（例如准确率、损失值等）。最终，模型在交叉验证下的性能就是这 <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 次结果的平均值</strong>。</p><h3 id="_4-优势" tabindex="-1"><a class="header-anchor" href="#_4-优势"><span>4.优势</span></a></h3><ul><li><p><strong>更可靠的性能评估：</strong> 由于每个数据点都恰好被用于验证一次，并且被用于训练 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 次，因此它可以更充分地利用数据，减少了由于随机划分导致的<strong>评估偏差</strong>。</p></li><li><p><strong>减少过拟合风险的估计：</strong> 它可以更好地估计模型在面对新数据时的<strong>泛化能力</strong>。</p></li><li><p><strong>数据利用率高：</strong> 在数据集规模较小时尤其有用，它能确保所有数据点都被用于验证。</p></li></ul><h2 id="模型优化失败原因" tabindex="-1"><a class="header-anchor" href="#模型优化失败原因"><span>模型优化失败原因</span></a></h2><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206160740918.png" alt="image-20251206160740918"></p><p>当梯度 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∇</mi><mi>J</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\\nabla J(\\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∇</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>) 接近或等于零时，优化器会遇到以下两种主要类型的<strong>临界点(critical point)</strong>：</p><ul><li><strong>局部最小值 (local minima):</strong><ul><li><strong>描述:</strong> 损失曲面中的一个凹陷点，该点的损失值大于全局最小值。</li><li><strong>影响:</strong> 算法到达此点后，梯度为零，参数停止更新，模型被困在一个次优解。</li></ul></li><li><strong>鞍点 (saddle point):</strong><ul><li><strong>描述:</strong> 损失曲面中的一个点，其梯度也为零，但在某些维度上是向下凸的，而在其他维度上是向上凹的（形状像马鞍）。</li><li><strong>影响:</strong> 在高维空间中鞍点非常常见。算法可能会被困在此点，或者如果使用小批量 SGD 等带有随机性的方法，可能会缓慢地逃离。</li></ul></li></ul><h3 id="如何分辨" tabindex="-1"><a class="header-anchor" href="#如何分辨"><span>如何分辨</span></a></h3><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206162222264.png" alt="image-20251206162222264"></p><p>泰勒级数近似的核心思想是：在某个点a附近，可以用一个<strong>多项式</strong>来逼近一个复杂的函数。</p><p>比如：$$f(x) = f(a) + f&#39;(a)(x-a) + \\frac{f&#39;&#39;(a)}{2!}(x-a)^2 $$，x是a附近的点。</p><p>当梯度为0，$$ f&#39;(a)(x-a)$$为0，就可以去看$$f(x) = f(a) + \\frac{f&#39;&#39;(a)}{2!}(x-a)^2 $$，如上图。</p><h2 id="batch和momentum" tabindex="-1"><a class="header-anchor" href="#batch和momentum"><span>Batch和Momentum</span></a></h2><h3 id="_1-small-batch和large-batch" tabindex="-1"><a class="header-anchor" href="#_1-small-batch和large-batch"><span>1. Small Batch和Large Batch</span></a></h3><ul><li><p><strong>Batch 大 → 梯度更稳定 smoother，收敛稳定（不乱跳）</strong></p></li><li><p><strong>Batch 小 → 梯度噪声大，训练不稳定，但更容易跳出局部最优</strong></p></li></ul><blockquote><p>超大 batch 会让梯度太准确、太稳定，失去了随机扰动。模型容易陷入 sharp minima、泛化能力变差，而且更新频率更低，学习率调整困难，因此优化效果反而不好。</p></blockquote><blockquote><p>小 batch 会引入梯度噪声，这种噪声是一种“隐式正则化”，帮助模型找到对测试集更友好的平坦解（flat minima），因此泛化更好。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206185253805.png" alt="image-20251206185253805"></p><h3 id="_2-momentum" tabindex="-1"><a class="header-anchor" href="#_2-momentum"><span>2. Momentum</span></a></h3><blockquote><p>Momentum = 梯度下降 + “惯性”</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206185741458.png" alt="image-20251206185741458"></p><p>把过去的方向也考虑进去，让更新更有惯性、更平滑。</p><h2 id="客制化的lr" tabindex="-1"><a class="header-anchor" href="#客制化的lr"><span>客制化的LR</span></a></h2><blockquote><p>一开始大胆试、后期谨慎走</p><p>学习率大 → 学得快，但不稳定</p><p>学习率小 → 稳定但慢</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206191316463.png" alt="image-20251206191316463"></p><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206191949972.png" alt=""></p><h3 id="_1-自动调节学习率-root-mean-square" tabindex="-1"><a class="header-anchor" href="#_1-自动调节学习率-root-mean-square"><span>1. 自动调节学习率(Root Mean Square)</span></a></h3><ul><li><p>RMSProp</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>g</mi><mi>i</mi><mi>t</mi></msubsup></mrow><annotation encoding="application/x-tex">g_i^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0522em;vertical-align:-0.2587em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-2.4413em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span></span></span></span>：当前梯度</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>σ</mi><mi>i</mi><mi>t</mi></msubsup></mrow><annotation encoding="application/x-tex">\\sigma_i^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0522em;vertical-align:-0.2587em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-2.4413em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span></span></span></span>：最近一段时间梯度能量的“RMS 值”</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>：衰减系数，一般 0.9</p></li><li><p>Adam = Momentum + RMSProp</p></li></ul><h3 id="_2-学习率调度-learning-rate-scheduling" tabindex="-1"><a class="header-anchor" href="#_2-学习率调度-learning-rate-scheduling"><span>2. 学习率调度(Learning Rate Scheduling)</span></a></h3><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206193250018.png" alt="image-20251206193250018"></p><ul><li><p>Learning Rate Decay</p><p>每隔固定 epoch，把 LR 降低。</p><p>✔ 非常平滑</p></li><li><p>Warm up</p><p>训练一开始不要突然用大 LR，先慢慢升上去。</p><p>✔ Transformer、中大型模型标配 ✔ 防止训练初期 loss 爆炸</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206193702587.png" alt="image-20251206193702587"></p><h2 id="分类-classification" tabindex="-1"><a class="header-anchor" href="#分类-classification"><span>分类(Classification)</span></a></h2><p><img src="https://cdn.jsdelivr.net/gh/salt235/tuchuang@main/macImg/image-20251206194210996.png" alt="image-20251206194210996"></p><h3 id="_1-softmax" tabindex="-1"><a class="header-anchor" href="#_1-softmax"><span>1. Softmax</span></a></h3><p>softmax是深度学习里 <strong>把一组数变成“概率分布”</strong> 的函数。</p><p>它能把任意实数向量转换成：</p><ul><li>所有值都在 0 到 1 之间</li><li>所有值加起来 = 1</li><li>越大的值变成越大的概率</li></ul><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>softmax</mtext><mo stretchy="false">(</mo><msub><mi>z</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup><mrow><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msup><mi>e</mi><msub><mi>z</mi><mi>j</mi></msub></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\\text{softmax}(z_i) = \\frac{e^{z_i}}{\\sum_{j=1}^{n} e^{z_j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">softmax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.5885em;vertical-align:-0.6775em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.911em;"><span style="top:-2.6447em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7047em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.8971em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4603em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.779em;"><span style="top:-2.9714em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.044em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"></span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5092em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.044em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"></span><span class="mord mathnormal mtight">i</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3147em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6775em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h3 id="_2-分类问题的loss" tabindex="-1"><a class="header-anchor" href="#_2-分类问题的loss"><span>2. 分类问题的Loss</span></a></h3><ul><li><p>MSE（均方误差）</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>MSE</mtext><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msubsup><mi>y</mi><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>−</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mtext> </mtext></mrow><annotation encoding="application/x-tex"> \\text{MSE} = \\frac{1}{n} \\sum_{i=1}^{n} (y_i&#39; - \\hat{y}_i)^2  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">MSE</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"> </span></span></span></span></span></p><p>当 sigmoid 输出接近 0 或 1 时，MSE 的梯度极小，在分类任务中非常差！</p><p>回归用 MSE，因为它直接衡量数值差距。</p></li><li><p>Cross-Entropy（交叉熵）</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>CE</mtext><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>C</mi></munderover><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><msubsup><mi>y</mi><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> \\text{CE} = - \\sum_{i=1}^{C} \\hat{y}_i \\ln(y_i&#39;) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">CE</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.106em;vertical-align:-1.2777em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>分类用 CE，因为它对概率敏感、梯度稳定、训练快；</p></li></ul>',66)])])}const r=a(e,[["render",l]]),c=JSON.parse('{"path":"/notes/Lee_DL/t9rbwk0z/","title":"DL_Note","lang":"zh-CN","frontmatter":{"title":"DL_Note","createTime":"2025/12/27 14:44:18","permalink":"/notes/Lee_DL/t9rbwk0z/"},"readingTime":{"minutes":5.61,"words":1684},"git":{"createdTime":1766823909000,"updatedTime":1766825682000,"contributors":[{"name":"salt235","username":"salt235","email":"734489881@qq.com","commits":2,"avatar":"https://avatars.githubusercontent.com/salt235?v=4","url":"https://github.com/salt235"}]},"filePathRelative":"notes/Lee_DL/概论/DL_Note.md","headers":[]}');export{r as comp,c as data};

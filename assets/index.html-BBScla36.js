import{_ as e,c as i,a,o as n}from"./app-DCYTdW2o.js";const l={};function t(p,s){return n(),i("div",null,[...s[0]||(s[0]=[a(`<h2 id="ros运行管理" tabindex="-1"><a class="header-anchor" href="#ros运行管理"><span>ROS运行管理</span></a></h2><h3 id="元功能包" tabindex="-1"><a class="header-anchor" href="#元功能包"><span>元功能包</span></a></h3><blockquote><p>在ROS中，提供了一种方式可以将不同的功能包打包成一个功能包，当安装某个功能模块时，直接调用打包后的功能包即可，该包又称之为元功能包(metapackage)。</p></blockquote><p><strong>首先:</strong>新建一个功能包</p><p><strong>然后:</strong>修改<strong>package.xml</strong> ,内容如下:</p><div class="language-**xml line-numbers-mode" data-highlighter="shiki" data-ext="**xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-**xml"><span class="line"><span> &lt;exec_depend&gt;被集成的功能包&lt;/exec_depend&gt;</span></span>
<span class="line"><span> .....</span></span>
<span class="line"><span> &lt;export&gt;</span></span>
<span class="line"><span>   &lt;metapackage /&gt;</span></span>
<span class="line"><span> &lt;/export&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>最后:</strong>修改 CMakeLists.txt,内容如下:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>cmake_minimum_required(VERSION 3.0.2)</span></span>
<span class="line"><span>project(demo)</span></span>
<span class="line"><span>find_package(catkin REQUIRED)</span></span>
<span class="line"><span>catkin_metapackage()</span></span>
<span class="line"><span>// 不可以有换行</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="launch文件" tabindex="-1"><a class="header-anchor" href="#launch文件"><span>launch文件</span></a></h3><blockquote><p>使用方法：</p><p>​ roslaunch 包名 launch文件名.launch</p></blockquote><ul><li><p>launch标签</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>&lt;launch deprecated = &quot;弃用声明&quot;&gt;</span></span>
<span class="line"><span>------</span></span>
<span class="line"><span>&lt;/launch&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>node标签</p><p>属性：</p><ul><li><p>pkg=&quot;包名&quot;</p><p>节点所属的包</p></li><li><p>type=&quot;nodeType&quot;</p><p>节点类型(与之相同名称的可执行文件)</p></li><li><p>name=&quot;nodeName&quot;</p><p>节点名称(在 ROS 网络拓扑中节点的名称)</p></li><li><p>args=&quot;xxx xxx xxx&quot; (可选)</p><p>将参数传递给节点</p></li><li><p>machine=&quot;机器名&quot;</p><p>在指定机器上启动节点</p></li><li><p>respawn=&quot;true | false&quot; (可选)</p><p>如果节点退出，是否<strong>自动重启</strong></p></li><li><p>respawn_delay=&quot; N&quot; (可选)</p><p>如果 respawn 为 true, 那么延迟 N 秒后启动节点</p></li><li><p>required=&quot;true | false&quot; (可选)</p><p>该节点是否必须，如果为 true,那么如果该节点退出，将杀死<strong>整个</strong> roslaunch</p></li><li><p>ns=&quot;xxx&quot; (可选)</p><p>在指定命名空间 xxx 中启动节点</p></li><li><p>clear_params=&quot;true | false&quot; (可选)</p><p>在启动前，删除节点的私有空间的所有参数</p></li><li><p>output=&quot;log | screen&quot; (可选)</p><p>日志发送目标，可以设置为 log 日志文件，或 screen 屏幕,默认是 log</p></li></ul></li><li><p>include标签</p><p><code>include</code>标签用于将另一个 xml 格式的 launch 文件导入到当前文件</p><ul><li><p>file=&quot;$(find 包名)/xxx/xxx.launch&quot;</p><p>要包含的文件路径</p></li><li><p>ns=&quot;xxx&quot; (可选)</p><p>在指定命名空间导入文件</p></li></ul><p>在launch文件夹中新建一个start_turtle_use.launch，来复用之前写的start_turtle.launch。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>&lt;!-- 复用start_turtle.launch --&gt;</span></span>
<span class="line"><span>&lt;launch&gt;</span></span>
<span class="line"><span>    &lt;include file =&quot;$(find test)/launch/start_turtle.launch&quot; /&gt;</span></span>
<span class="line"><span>&lt;/launch&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>remap标签</p><p>用于话题重命名</p><p>这里把乌龟GUI的控制话题/turtle1/cmd_vel重命名/cmd_vel。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>&lt;!-- 启动乌龟GUI与键盘控制节点 --&gt;</span></span>
<span class="line"><span>&lt;launch&gt;</span></span>
<span class="line"><span>    &lt;!-- 乌龟GUI --&gt;</span></span>
<span class="line"><span>    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtlesim_node&quot; name=&quot;turtle1&quot; output=&quot;screen&quot;&gt;</span></span>
<span class="line"><span>        &lt;remap from = &quot;/turtle1/cmd_vel&quot; to = &quot;/cmd_vel&quot;/&gt;;</span></span>
<span class="line"><span>    &lt;/node&gt;</span></span>
<span class="line"><span>    &lt;!-- 乌龟键盘控制 --&gt;</span></span>
<span class="line"><span>    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtle_teleop_key&quot; name=&quot;key&quot; output=&quot;screen&quot; /&gt;</span></span>
<span class="line"><span>&lt;/launch&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后可以调用ros自带的键盘控制节点，他的话题就是cmd_vel。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yyx@TX:~$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rosrun</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> teleop_twist_keyboard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> teleop_twist_keyboard.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>param标签</p><p><code>&lt;param&gt;</code>标签主要用于在参数服务器上设置参数，参数源可以在标签中通过 value 指定，也可以通过外部文件加载，在<code>&lt;node&gt;</code>标签中时，相当于私有命名空间。</p><ul><li><p>name=&quot;命名空间/参数名&quot;</p><p>参数名称，可以包含命名空间</p></li><li><p>value=&quot;xxx&quot; (可选)</p><p>定义参数值，如果此处省略，必须指定外部文件作为参数源</p></li><li><p>type=&quot;str | int | double | bool | yaml&quot; (可选)</p><p>指定参数类型，如果未指定，roslaunch 会尝试确定参数类型，规则如下:</p><ul><li>如果包含 &#39;.&#39; 的数字解析未浮点型，否则为整型</li><li>&quot;true&quot; 和 &quot;false&quot; 是 bool 值(不区分大小写)</li><li>其他是字符串</li></ul></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>&lt;launch&gt;</span></span>
<span class="line"><span>    &lt;param name = &quot;param-a&quot; type = &quot;int&quot; value = &quot;100&quot;/&gt;</span></span>
<span class="line"><span>    &lt;!-- 乌龟GUI --&gt;</span></span>
<span class="line"><span>    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtlesim_node&quot; name=&quot;turtle1&quot; output=&quot;screen&quot; &gt;</span></span>
<span class="line"><span>        &lt;param name = &quot;param-b&quot; type = &quot;int&quot; value = &quot;100&quot;/&gt;</span></span>
<span class="line"><span>    &lt;/node&gt;</span></span>
<span class="line"><span>    &lt;!-- 乌龟键盘控制 --&gt;</span></span>
<span class="line"><span>    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtle_teleop_key&quot; name=&quot;key&quot; output=&quot;screen&quot; /&gt;</span></span>
<span class="line"><span>&lt;/launch&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里加了/param-a和/turtle1/param-b两个</p><p>参数。在launch标签和node标签内的param有所区别。</p></li><li><p>rosparam</p><p>略。</p></li><li><p>group</p><p><code>&lt;group&gt;</code>标签可以对节点分组，具有 ns 属性，可以让节点归属某个命名空间。</p><p>略。</p></li><li><p>arg</p><p><code>&lt;arg&gt;</code>标签是用于动态传参，类似于函数的参数，可以增强launch文件的灵活性。</p><p>有点像宏定义，可以设置参数的默认值。</p><p>略。</p></li></ul><h3 id="重名问题" tabindex="-1"><a class="header-anchor" href="#重名问题"><span>重名问题</span></a></h3><h4 id="节点重名" tabindex="-1"><a class="header-anchor" href="#节点重名"><span>节点重名</span></a></h4><ul><li><p>语法: rosrun 包名 节点名 __ns:=新名称，可以设置节点的命名空间。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rosrun</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> turtlesim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> turtlesim_node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> __ns:=/xxx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>语法: rosrun 包名 节点名 __name:=新名称</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rosrun</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> turtlesim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  turtlesim_node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> __name:=t1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>语法: rosrun 包名 节点名 ns:=新名称 name:=新名称</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rosrun</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> turtlesim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> turtlesim_node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> __ns:=/xxx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> __name:=tn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>在launch文件里面也可以起名字和命名空间</p></li></ul><h4 id="话题重名" tabindex="-1"><a class="header-anchor" href="#话题重名"><span>话题重名</span></a></h4><ul><li><p>将 teleop_twist_keyboard 节点的话题由/cmd_vel设置为/turtle1/cmd_vel</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/turtle1/cmd_vel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>通过launch文件的remap</p></li><li><p>编码设置话题名称（略）</p></li></ul><h4 id="参数名称设置" tabindex="-1"><a class="header-anchor" href="#参数名称设置"><span>参数名称设置</span></a></h4><ul><li><p>rosrun设置</p><p><strong>语法:</strong> rosrun 包名 节点名称 _参数名:=参数值</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>rosrun turtlesim turtlesim_node _A:=100</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>launch文件设置</p><p>param标签</p></li><li><p>编码实现</p><p>略。</p></li></ul>`,18)])])}const r=e(l,[["render",t]]),u=JSON.parse('{"path":"/notes/ROS/787ihz5n/","title":"ROS运行管理","lang":"zh-CN","frontmatter":{"title":"ROS运行管理","createTime":"2025/12/27 14:44:18","permalink":"/notes/ROS/787ihz5n/"},"readingTime":{"minutes":3.6,"words":1081},"git":{"createdTime":1766823909000,"updatedTime":1766823909000,"contributors":[{"name":"salt235","username":"salt235","email":"734489881@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/salt235?v=4","url":"https://github.com/salt235"}]},"filePathRelative":"notes/ROS/ROS基础/ROS运行管理.md","headers":[]}');export{r as comp,u as data};
